<ng-container *ngIf="underconstraction; then showUnderCpage; else elseBlock">
  <div>This is shown when condition is true</div>
</ng-container>

<ng-template #showUnderCpage>
  <app-underconstraction-page></app-underconstraction-page>
</ng-template>

<ng-template #elseBlock>
  <div class="container-fluid" style="position: relative">
    <!-- <div class="shimmer-wrapper" *ngIf="isLoadingDashboard">

      <app-shared-loader [isLoading]="isLoadingDashboard"></app-shared-loader>
    </div> -->
    <ul *ngIf="isLoadingDashboard">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>

    <app-pagetitle
      title="Dashboard"
      [breadcrumbItems]="breadCrumbItems"
    ></app-pagetitle>

    <div class="row">
      <div class="col-xl-8">
        <div class="row">
          <div *ngFor="let stat of statData" class="col-md-4">
            <app-stat
              [title]="stat?.title"
              [value]="stat?.value"
              [icon]="stat?.icon"
            ></app-stat>
          </div>
        </div>
        <!-- end row -->

        <div class="card">
          <div class="card-body pb-1">
            <div class="float-end d-none d-md-inline-block">
              <div class="btn-group mb-2">
                <button type="button" class="btn btn-sm btn-light">
                  Today:
                  {{ todayRevenue | currency : "TSH " : "code" : "1.0-0" }}
                </button>
                <!-- <button type="button" class="btn btn-sm btn-light active">
                  Weekly
                </button>
                <button type="button" class="btn btn-sm btn-light">
                  Monthly
                </button> -->
              </div>
            </div>
            <h4 class="card-title mb-4">Revenue Analytics</h4>
            <div>
              <apx-chart
                dir="ltr"
                class="apex-charts"
                [series]="revenueChart?.series"
                [chart]="revenueChart?.chart"
                [legend]="revenueChart?.legend"
                [colors]="revenueChart?.colors"
                [labels]="revenueChart?.labels"
                [stroke]="revenueChart?.stroke"
                [plotOptions]="revenueChart?.plotOptions"
              >
              </apx-chart>
            </div>
          </div>

          <div class="card-body border-top text-center">
            <div class="row">
              <div class="col-sm-4">
                <div class="d-inline-flex">
                  <h5 class="me-2">
                    {{
                      currentMonthRevenue | currency : "TSH " : "code" : "1.0-0"
                    }}
                  </h5>
                  <div class="text-success">
                    <i class="mdi mdi-menu-up font-size-14"> </i
                    >{{ currentMonthRevenuePercentage }} %
                  </div>
                </div>
                <p class="text-muted text-truncate mb-0">This month</p>
              </div>

              <div class="col-sm-4">
                <div class="mt-4 mt-sm-0">
                  <div class="d-inline-flex">
                    <h5 class="mb-0 me-2">
                      {{
                        currentYearRevenue
                          | currency : "TSH " : "code" : "1.0-0"
                      }}
                    </h5>
                  </div>
                  <p class="mb-2 text-muted text-truncate">
                    <i
                      class="mdi mdi-circle text-success font-size-10 me-1"
                    ></i>
                    This Year
                  </p>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="mt-4 mt-sm-0">
                  <div class="d-inline-flex">
                    <h5 class="mb-0">
                      {{
                        previousYearRevenue
                          | currency : "TSH " : "code" : "1.0-0"
                      }}
                    </h5>
                  </div>
                  <p class="mb-2 text-muted text-truncate">
                    <i
                      class="mdi mdi-circle text-primary font-size-10 me-1"
                    ></i>
                    Previous Year
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-4">
        <div class="card">
          <div class="card-body">
            <div class="float-end">
              <select class="custom-select custom-select-sm">
                <option selected>Apr</option>
                <option value="1">Mar</option>
                <option value="2">Feb</option>
                <option value="3">Jan</option>
              </select>
            </div>
            <h4 class="card-title mb-4">Sales Analytics</h4>

            <apx-chart
              dir="ltr"
              class="apex-charts"
              [series]="salesAnalytics?.series"
              [chart]="salesAnalytics?.chart"
              [legend]="salesAnalytics?.legend"
              [colors]="salesAnalytics?.colors"
              [labels]="revenueChart?.labels"
              [dataLabels]="salesAnalytics?.dataLabels"
              [plotOptions]="salesAnalytics?.plotOptions"
            >
            </apx-chart>
            <div class="row">
              <div class="col-4">
                <div class="text-center mt-4">
                  <p class="mb-2 text-truncate">
                    <i
                      class="mdi mdi-circle text-primary font-size-10 me-1"
                    ></i>
                    Product A
                  </p>
                  <h5>42 %</h5>
                </div>
              </div>
              <div class="col-4">
                <div class="text-center mt-4">
                  <p class="mb-2 text-truncate">
                    <i
                      class="mdi mdi-circle text-success font-size-10 me-1"
                    ></i>
                    Product B
                  </p>
                  <h5>26 %</h5>
                </div>
              </div>
              <div class="col-4">
                <div class="text-center mt-4">
                  <p class="mb-2 text-truncate">
                    <i
                      class="mdi mdi-circle text-warning font-size-10 me-1"
                    ></i>
                    Product C
                  </p>
                  <h5>42 %</h5>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div class="dropdown float-end" ngbDropdown>
              <a
                href="javascript: void(0);"
                class="dropdown-toggle arrow-none card-drop"
                data-toggle="dropdown"
                aria-expanded="false"
                ngbDropdownToggle
              >
                <i class="mdi mdi-dots-vertical"></i>
              </a>
              <div class="dropdown-menu dropdown-menu-end" ngbDropdownMenu>
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item"
                  >Sales Report</a
                >
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item"
                  >Export Report</a
                >
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">Profit</a>
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">Action</a>
              </div>
            </div>

            <h4 class="card-title mb-4">Earning Reports</h4>
            <div class="text-center">
              <div class="row">
                <div class="col-sm-6">
                  <div>
                    <div class="mb-3">
                      <apx-chart
                        dir="ltr"
                        class="apex-charts"
                        [series]="sparklineEarning?.series"
                        [chart]="sparklineEarning?.chart"
                        [colors]="sparklineEarning?.colors"
                        [labels]="sparklineEarning?.labels"
                        [dataLabels]="sparklineEarning?.dataLabels"
                        [plotOptions]="sparklineEarning?.plotOptions"
                      >
                      </apx-chart>
                    </div>

                    <p class="text-muted text-truncate mb-2">Weekly Earnings</p>
                    <h5 class="mb-0">$2,523</h5>
                  </div>
                </div>

                <div class="col-sm-6">
                  <div class="mt-5 mt-sm-0">
                    <div class="mb-3">
                      <apx-chart
                        dir="ltr"
                        class="apex-charts"
                        [series]="sparklineMonthly?.series"
                        [chart]="sparklineMonthly?.chart"
                        [colors]="sparklineMonthly?.colors"
                        [labels]="sparklineMonthly?.labels"
                        [dataLabels]="sparklineMonthly?.dataLabels"
                        [plotOptions]="sparklineMonthly?.plotOptions"
                      >
                      </apx-chart>
                    </div>

                    <p class="text-muted text-truncate mb-2">
                      Monthly Earnings
                    </p>
                    <h5 class="mb-0">$11,235</h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end row -->

    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-body">
            <div class="dropdown float-end" ngbDropdown>
              <a
                href="javascript: void(0);"
                class="dropdown-toggle arrow-none card-drop"
                ngbDropdownToggle
                data-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="mdi mdi-dots-vertical"></i>
              </a>
              <div class="dropdown-menu dropdown-menu-end" ngbDropdownMenu>
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item"
                  >Sales Report</a
                >
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item"
                  >Export Report</a
                >
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">Profit</a>
                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">Action</a>
              </div>
            </div>
            <h4 class="card-title mb-4">Latest Sales</h4>
            <div class="row">
              <div class="col-sm-12 col-md-12">
                <div
                  id="tickets-table_filter"
                  class="dataTables_filter text-md-end"
                >
                  <label class="d-inline-flex align-items-center"
                    >Search:
                    <input
                      type="text"
                      name="searchTerm"
                      class="form-control form-control-sm ms-2"
                      aria-controls="tickets-table"
                      [(ngModel)]="term"
                  /></label>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-centered">
                <thead class="table-light">
                  <tr>
                    <th>SalesID</th>
                    <th>Date</th>
                    <th>Product</th>

                    <th>Qty Sold</th>
                    <th>unit Total Sales</th>
                    <th>unit Total revevue</th>
                    <th>Payment Status</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of SalesData | filter : term">
                    <td>{{ item?.id }}</td>
                    <td>
                      {{
                        item?.sales_date
                          | date : "shortDate" : "Africa/Dar_es_Salaam"
                      }}
                    </td>
                    <td>
                      {{ item?.stock_item?.product?.name }}
                    </td>
                    <td>{{ item?.quantity_sold }}</td>
                    <td>{{ item?.total_sales | number : "1.0-0" }} TZS</td>
                    <td>{{ item?.total_revenue | number : "1.0-0" }} TZS</td>
                    <td>
                      <div
                        class="badge font-size-12"
                        [ngClass]="{
                          'bg-danger-subtle text-danger':
                            item.payment_satatus === 'Chargeback',
                          'bg-success-subtle text-success':
                            item.payment_satatus === 'Paid',
                          'bg-warning-subtle text-warning':
                            item.payment_satatus === 'Unpaid'
                        }"
                      >
                        {{ item.payment_satatus }}
                      </div>
                    </td>
                    <td>
                      <a
                        href="javascript:void(0);"
                        class="me-3 text-primary"
                        ngbTooltip="Edit"
                        ><i class="mdi mdi-pencil font-size-18"></i
                      ></a>
                      <a
                        href="javascript:void(0);"
                        class="text-danger"
                        ngbTooltip="Delete"
                        ><i class="mdi mdi-trash-can font-size-18"></i
                      ></a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end row -->
  </div>
</ng-template>
